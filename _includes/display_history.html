<section class=" page-section" id="{{ site.data.sitetext.history.section | default: "history" }}">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center mt-5">
        <h2 class="section-heading text-uppercase">
          {{ site.data.sitetext[site.locale].history.title | markdownify | default: "History" }}
        </h2>
        <h3 class="section-subheading text-muted">
          {{ site.data.sitetext[site.locale].history.text | markdownify }}
        </h3>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        {% assign all_days = "" | split: "" %}

        {% for month in site.portfolio %}
          {% for day in month.days %}
            {% assign all_days = all_days | push: day %}
          {% endfor %}
        {% endfor %}

        {% assign all_days = all_days | sort: "date" %}

        <div class="event-list">
          {% for day in all_days %}
          <div class="event-item">
            
            <!-- Date Block (Now Above Events) -->
            <div class="date-container">
              <h2 class="date-display">
                {{ day.date | date: "%d" }} {{ day.date | date: "%B" }}
              </h2>
            </div>

            <!-- Events List -->
            <div class="events-content">
              {% for year_events in day.years %}
                {% assign year = year_events[0] %}
                {% assign events = year_events[1].events %}

                <div class="year-block">
                  <strong class="event-year">{{ year }}</strong>
                  <ul class="event-details">
                    {% for event in events %}
                      <li>
                        <strong class="event-title">{{ event.title }}</strong>
                        <p class="event-description">{{ event.description }}</p>
                      </li>
                    {% endfor %}
                  </ul>
                </div>
              {% endfor %}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  function toggleTheme() {
    document.body.classList.toggle('dark-theme');
    const button = document.getElementById('theme-toggle-btn');
    if (document.body.classList.contains('dark-theme')) {
      button.innerHTML = 'ðŸŒž';  // Sun icon for dark mode
      localStorage.setItem('theme', 'dark');
    } else {
      button.innerHTML = 'ðŸŒ™';  // Moon icon for light mode
      localStorage.setItem('theme', 'light');
    }
  }

  function applySavedTheme() {
    const savedTheme = localStorage.getItem('theme');
    const button = document.getElementById('theme-toggle-btn');

    if (savedTheme === 'dark') {
      document.body.classList.add('dark-theme');
      button.innerHTML = 'ðŸŒž';  
    } else {
      document.body.classList.remove('dark-theme');
      button.innerHTML = 'ðŸŒ™'; 
    }
  }

  window.onload = applySavedTheme;
</script>
<style>
  :root {
    --bg-color: #f4ebba;
    --text-color: #111111;
    --header-bg: #f4ebba;
    --event-bg: #eee289;
    --event-border-color: #ddd;
    --link-color: #2a7ae2;
  }
.dark-theme {
    --bg-color: #000000;
    --text-color: #c4b706;
    --header-bg: #000000;
    --event-bg: #f0e0a8;
    --event-border-color: #f1eacf;
    --link-color: #335c01;
  }

  /* General Styles */
  body {
    background-color: var(--bg-color);
    color: var(--text-color);
    font-family: Arial, sans-serif;
  }

  .masthead {
    background-color: var(--header-bg);
    color: var(--text-color);  
  }

  .masthead h1, .masthead h3 {
    color: var(--text-color);  
  }

  .event-item {
    background-color: var(--event-bg);
    border-bottom: 1px solid var(--event-border-color);
    padding: 15px 0;
    transition: background-color 0.3s ease;
  }

  .event-year {
    font-size: 1.2em;
    font-weight: bold;
    color: var(--text-color); 
  }

  .event-title {
    font-size: 1.1em;
    font-weight: bold;
    color: var(--link-color);  
  }

  .event-description {
    font-size: 0.9em;
    color: var(--text-color); 
  }

  .theme-toggle-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text-color);
  }

  .theme-toggle-btn:hover {
    opacity: 0.7;
  }

  /* Event Section */
  .history-section {
    color: var(--text-color);
  }

  .event-list {
    width: 100%;
    max-width: 900px;
    margin: 0 auto;
  }

  .date-container {
    text-align: center;
    margin-bottom: 10px;
  }

  .date-display {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-color);
  }

  .events-content {
    margin-left: 20px;
  }

  .year-block {
    margin-top: 10px;
  }

  .event-details {
    list-style: none;
    padding-left: 0;
    margin-top: 5px;
  }

  .event-title {
    font-size: 1.1em;
    font-weight: bold;
    display: block;
  }

  .event-description {
    font-size: 0.9em;
    color: #666;
    margin-top: 2px;
  }
</style>